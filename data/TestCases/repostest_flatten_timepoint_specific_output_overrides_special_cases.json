{
    "functionName": "test_flatten_timepoint_specific_output_overrides_special_cases",
    "className": null,
    "fileName": "/PEtab-dev_&_PEtab/tests_&_test_petab.py",
    "projectName": "repos",
    "Label": false,
    "isTest": true,
    "Body": "\"\"\"Test flatten_timepoint_specific_output_overrides\n    for special cases:\n    * no preequilibration\n    * no observable parameters\n    \"\"\"\nobservable_df = pd.DataFrame(data={OBSERVABLE_ID: ['obs1'],\n    OBSERVABLE_FORMULA: ['species1'], NOISE_FORMULA: ['noiseParameter1_obs1']})\nobservable_df.set_index(OBSERVABLE_ID, inplace=True)\nobservable_df_expected = pd.DataFrame(data={OBSERVABLE_ID: ['obs1_1',\n    'obs1_2'], OBSERVABLE_FORMULA: ['species1', 'species1'], NOISE_FORMULA:\n    ['noiseParameter1_obs1_1', 'noiseParameter1_obs1_2']})\nobservable_df_expected.set_index(OBSERVABLE_ID, inplace=True)\nmeasurement_df = pd.DataFrame(data={OBSERVABLE_ID: ['obs1', 'obs1', 'obs1',\n    'obs1'], SIMULATION_CONDITION_ID: ['condition1', 'condition1',\n    'condition1', 'condition1'], TIME: [1.0, 1.0, 2.0, 2.0], MEASUREMENT: [\n    np.nan] * 4, NOISE_PARAMETERS: ['noiseParOverride1',\n    'noiseParOverride1', 'noiseParOverride2', 'noiseParOverride2']})\nmeasurement_df_expected = pd.DataFrame(data={OBSERVABLE_ID: ['obs1_1',\n    'obs1_1', 'obs1_2', 'obs1_2'], SIMULATION_CONDITION_ID: ['condition1',\n    'condition1', 'condition1', 'condition1'], TIME: [1.0, 1.0, 2.0, 2.0],\n    MEASUREMENT: [np.nan] * 4, NOISE_PARAMETERS: ['noiseParOverride1',\n    'noiseParOverride1', 'noiseParOverride2', 'noiseParOverride2']})\nproblem = petab.Problem(measurement_df=measurement_df, observable_df=\n    observable_df)\nassert petab.lint_problem(problem) is False\nassert petab.lint.measurement_table_has_timepoint_specific_mappings(\n    measurement_df) is True\npetab.flatten_timepoint_specific_output_overrides(problem)\nassert petab.lint.measurement_table_has_timepoint_specific_mappings(problem\n    .measurement_df) is False\nassert problem.observable_df.equals(observable_df_expected) is True\nassert problem.measurement_df.equals(measurement_df_expected) is True\nassert petab.lint_problem(problem) is False\n"
}