{
    "functionName": "test_estimate_competence_ratio_batch",
    "className": null,
    "fileName": "/Menelau_&_DESlib/deslib_&_tests_&_des_&_test_des_knn.py",
    "projectName": "repos",
    "Label": false,
    "isTest": true,
    "Body": "n_samples = 10\nquery = np.ones((n_samples, 2))\nx = np.array([0, 1, 2, 3, 4, 5, 6]).reshape(-1, 1)\ny = np.array([0, 0, 0, 0, 1, 1, 1])\nclf1 = create_base_classifier(np.array([1, 0, 1, 0, 0, 0, 0]))\nclf2 = create_base_classifier(np.array([1, 0, 0, 0, 1, 0, 0]))\nclf3 = create_base_classifier(np.array([0, 0, 1, 0, 1, 1, 0]))\npool_classifiers = [clf1, clf2, clf3]\ntarget = DESKNN(pool_classifiers, k=7, pct_accuracy=1, pct_diversity=1,\n    metric='ratio')\ntarget.fit(x, y)\nneighbors = np.tile([0, 1, 2, 3, 4, 5, 6], (n_samples, 1))\ncompetences, diversity = target.estimate_competence(query, neighbors)\nassert np.allclose(competences, [2.0 / 7, 4.0 / 7, 5.0 / 7])\nassert np.allclose(diversity, [2.166, 3.666, 4.5], atol=0.01)\n"
}