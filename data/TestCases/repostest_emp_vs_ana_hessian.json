{
    "functionName": "test_emp_vs_ana_hessian",
    "className": null,
    "fileName": "/PaulHancock_&_Aegean/tests_&_test_fitting.py",
    "projectName": "repos",
    "Label": false,
    "isTest": true,
    "Body": "\"\"\"Test that the empirical and analytical Hessians agree\"\"\"\nmodel = make_model()\nx, y = np.indices((10, 10))\nemp_Hij = fitting.emp_hessian(model, x, y)\nana_Hij = fitting.hessian(model, x, y)\ndiff = np.abs(ana_Hij - emp_Hij)\nif not np.max(diff) < 1e-05:\n    raise AssertionError()\nmodel.add('c1_amp', 1, vary=True)\nmodel.add('c1_xo', 5, vary=True)\nmodel.add('c1_yo', 5, vary=True)\nmodel.add('c1_sx', 2.001, vary=True)\nmodel.add('c1_sy', 2, vary=True)\nmodel.add('c1_theta', 0, vary=True)\nmodel['components'].value = 2\nemp_Hij = fitting.emp_hessian(model, x, y)\nana_Hij = fitting.hessian(model, x, y)\ndiff = np.abs(ana_Hij - emp_Hij)\nif not np.max(diff) < 1:\n    raise AssertionError()\n"
}