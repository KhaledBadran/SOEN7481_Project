{
    "functionName": "test_make_masked_model",
    "className": null,
    "fileName": "/PaulHancock_&_Aegean/tests_&_test_AeRes.py",
    "projectName": "repos",
    "Label": false,
    "isTest": true,
    "Body": "\"\"\"Test make_model when a mask is being used\"\"\"\nfilename = 'tests/test_files/1904_comp.fits'\nsources = ar.load_sources(filename)\nhdulist = fits.open('tests/test_files/1904-66_SIN.fits')\nwcs_helper = wcs_helpers.WCSHelper.from_header(header=hdulist[0].header)\nmodel = ar.make_model(sources=sources, shape=hdulist[0].data.shape,\n    wcshelper=wcs_helper, mask=True)\nfinite = np.where(np.isfinite(model))\nif np.all(model == 0.0):\n    raise AssertionError('Model is empty')\nif not np.any(np.isnan(model)):\n    raise AssertionError('Model is not masked')\nif not np.all(model[finite] == 0.0):\n    raise AssertionError('Model has values that are not zero or nan')\nmodel = ar.make_model(sources=sources, shape=hdulist[0].data.shape,\n    wcshelper=wcs_helper, mask=True, frac=0.1)\nfinite = np.where(np.isfinite(model))\nif np.all(model == 0.0):\n    raise AssertionError('Model is empty')\nif not np.any(np.isnan(model)):\n    raise AssertionError('Model is not masked')\nif not np.all(model[finite] == 0.0):\n    raise AssertionError('Model has values that are not zero or nan')\n"
}