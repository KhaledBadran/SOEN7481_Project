{
    "functionName": "test_filewriter",
    "className": "TestFilewriter",
    "fileName": "/BciPy_&_BciPy/bcipy_&_acquisition_&_tests_&_test_processor.py",
    "projectName": "repos",
    "Label": false,
    "isTest": true,
    "Body": "\"\"\"Test FileWriter functionality\"\"\"\ndata = [[(i + j) for j in range(3)] for i in range(3)]\nexpected_csv_rows = ['0,1,2\\r\\n', '1,2,3\\r\\n', '2,3,4\\r\\n']\nfilewriter = FileWriter('foo.csv')\nfilewriter.set_device_info(DeviceInfo(name='foo-device', fs=100, channels=[\n    'c1', 'c2', 'c3']))\nmockopen = mock_open()\nwith patch('bcipy.acquisition.processor.open', mockopen):\n    with filewriter:\n        mockopen.assert_called_once_with('foo.csv', 'w', newline='')\n        handle = mockopen()\n        handle.write.assert_called_with('timestamp,c1,c2,c3\\r\\n')\n        for i, row in enumerate(data):\n            timestamp = float(i)\n            filewriter.process(row, timestamp)\n            handle.write.assert_called_with(str(timestamp) + ',' + str(\n                expected_csv_rows[i]))\n    mockopen().close.assert_called_once()\n"
}