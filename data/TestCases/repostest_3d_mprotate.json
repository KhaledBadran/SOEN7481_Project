{
    "functionName": "test_3d_mprotate",
    "className": null,
    "fileName": "/RI-imaging_&_ODTbrain/tests_&_test_alg3d_bpp.py",
    "projectName": "repos",
    "Label": false,
    "isTest": true,
    "Body": "myframe = sys._getframe()\nln = 10\nln2 = 2 * ln\ninitial_array = np.arange(ln2 ** 3).reshape((ln2, ln2, ln2))\nshared_array = mp.RawArray(ctypes.c_double, ln2 * ln2 * ln2)\narr = np.frombuffer(shared_array).reshape(ln2, ln2, ln2)\narr[:, :, :] = initial_array\n_alg3d_bpp.mprotate_dict['X'] = shared_array\n_alg3d_bpp.mprotate_dict['X_shape'] = ln2, ln2, ln2\npool = mp.Pool(processes=mp.cpu_count(), initializer=_alg3d_bpp.\n    _init_worker, initargs=(shared_array, (ln2, ln2, ln2), np.dtype(float)))\n_alg3d_bpp._mprotate(2, ln, pool, 2)\nif WRITE_RES:\n    write_results(myframe, arr)\nassert np.allclose(np.array(arr).flatten().view(float), get_results(myframe))\n"
}