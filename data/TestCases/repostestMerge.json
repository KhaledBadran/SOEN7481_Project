{
    "functionName": "testMerge",
    "className": "IVWTransformTest",
    "fileName": "/facebook_&_Ax/ax_&_modelbridge_&_tests_&_test_ivw_transform.py",
    "projectName": "repos",
    "Label": false,
    "isTest": false,
    "Body": "obsd = ObservationData(metric_names=['m1', 'm2', 'm2'], means=np.array([1.0,\n    2.0, 1.0]), covariance=np.array([[1.0, 0.2, 0.4], [0.2, 2.0, 0.8], [0.4,\n    0.8, 3.0]]))\nobsd2 = ivw_metric_merge(obsd)\nself.assertEqual(obsd2.metric_names, ['m1', 'm2'])\nself.assertTrue(np.array_equal(obsd2.means, np.array([1.0, 0.6 * 2 + 0.4])))\ncov12 = 0.2 * 0.6 + 0.4 * 0.4\ncov22 = 0.6 ** 2 * 2.0 + 0.4 ** 2 * 3 + 2 * 0.6 * 0.4 * 0.8\ncov_true = np.array([[1.0, cov12], [cov12, cov22]])\ndiscrep = np.max(np.abs(obsd2.covariance - cov_true))\nself.assertTrue(discrep < 1e-08)\n"
}