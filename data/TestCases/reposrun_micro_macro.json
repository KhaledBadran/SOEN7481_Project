{
    "functionName": "run_micro_macro",
    "className": null,
    "fileName": "/open-source-economics_&_OG-USA/ogusa_&_tests_&_test_run_ogusa.py",
    "projectName": "repos",
    "Label": false,
    "isTest": false,
    "Body": "guid = ''\nstart_time = time.time()\nREFORM_DIR = './OUTPUT_REFORM_' + guid\nBASELINE_DIR = './OUTPUT_BASELINE_' + guid\ntax_func_path_baseline = os.path.join(CUR_PATH, 'OUTPUT_BASELINE',\n    'TxFuncEst_baseline.pkl')\ntax_func_path_reform = os.path.join(CUR_PATH, 'OUTPUT_REFORM',\n    'TxFuncEst_policy.pkl')\nstart_year = sorted(iit_reform.keys())[0]\nog_spec['start_year'] = start_year\nwith open('log_{}.log'.format(guid), 'w') as f:\n    f.write('guid: {}\\n'.format(guid))\n    f.write('iit_reform: {}\\n'.format(iit_reform))\n    f.write('og_spec: {}\\n'.format(og_spec))\n\"\"\"\n    ------------------------------------------------------------------------\n        Run baseline\n    ------------------------------------------------------------------------\n    \"\"\"\noutput_base = BASELINE_DIR\nkwargs = {'output_base': output_base, 'baseline_dir': BASELINE_DIR, 'test':\n    True, 'time_path': True, 'baseline': True, 'og_spec': og_spec,\n    'run_micro': False, 'tax_func_path': tax_func_path_baseline, 'guid':\n    guid, 'client': client, 'num_workers': NUM_WORKERS}\nrunner(**kwargs)\n\"\"\"\n    ------------------------------------------------------------------------\n        Run reform\n    ------------------------------------------------------------------------\n    \"\"\"\noutput_base = REFORM_DIR\nkwargs = {'output_base': output_base, 'baseline_dir': BASELINE_DIR, 'test':\n    True, 'time_path': True, 'baseline': False, 'iit_reform': iit_reform,\n    'og_spec': og_spec, 'guid': guid, 'run_micro': False, 'tax_func_path':\n    tax_func_path_reform, 'client': client, 'num_workers': NUM_WORKERS}\nrunner(**kwargs)\ntime.sleep(0.5)\nbase_tpi = safe_read_pickle(os.path.join(BASELINE_DIR, 'TPI', 'TPI_vars.pkl'))\nbase_params = safe_read_pickle(os.path.join(BASELINE_DIR, 'model_params.pkl'))\nreform_tpi = safe_read_pickle(os.path.join(REFORM_DIR, 'TPI', 'TPI_vars.pkl'))\nreform_params = safe_read_pickle(os.path.join(REFORM_DIR, 'model_params.pkl'))\nans = ot.macro_table(base_tpi, base_params, reform_tpi=reform_tpi,\n    reform_params=reform_params, var_list=['Y', 'C', 'K', 'L', 'r', 'w'],\n    output_type='pct_diff', num_years=10, start_year=og_spec['start_year'])\nprint('total time was ', time.time() - start_time)\nreturn ans\n"
}