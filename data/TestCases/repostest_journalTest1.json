{
    "functionName": "test_journalTest1",
    "className": null,
    "fileName": "/bakwc_&_PySyncObj/test_syncobj.py",
    "projectName": "repos",
    "Label": false,
    "isTest": true,
    "Body": "dumpFiles = [getNextDumpFile(), getNextDumpFile()]\njournalFiles = [getNextJournalFile(), getNextJournalFile()]\nremoveFiles(dumpFiles)\nremoveFiles(journalFiles)\nrandom.seed(42)\na = [getNextAddr(), getNextAddr()]\no1 = TestObj(a[0], [a[1]], TEST_TYPE.JOURNAL_1, dumpFile=dumpFiles[0],\n    journalFile=journalFiles[0])\no2 = TestObj(a[1], [a[0]], TEST_TYPE.JOURNAL_1, dumpFile=dumpFiles[1],\n    journalFile=journalFiles[1])\nobjs = [o1, o2]\ndoTicks(objs, 10, stopFunc=lambda : o1._isReady() and o2._isReady())\nassert o1._getLeader().address in a\nassert o1._getLeader() == o2._getLeader()\no1.addValue(150)\no2.addValue(200)\ndoTicks(objs, 10, stopFunc=lambda : o1.getCounter() == 350 and o2.\n    getCounter() == 350)\nassert o1.getCounter() == 350\nassert o2.getCounter() == 350\no1._destroy()\no2._destroy()\na = [getNextAddr(), getNextAddr()]\no1 = TestObj(a[0], [a[1]], TEST_TYPE.JOURNAL_1, dumpFile=dumpFiles[0],\n    journalFile=journalFiles[0])\no2 = TestObj(a[1], [a[0]], TEST_TYPE.JOURNAL_1, dumpFile=dumpFiles[1],\n    journalFile=journalFiles[1])\nobjs = [o1, o2]\ndoTicks(objs, 10, stopFunc=lambda : o1._isReady() and o2._isReady() and o1.\n    getCounter() == 350 and o2.getCounter() == 350)\nassert o1._isReady()\nassert o2._isReady()\nassert o1._getLeader().address in a\nassert o1._getLeader() == o2._getLeader()\nassert o1.getCounter() == 350\nassert o2.getCounter() == 350\no1.addValue(100)\no2.addValue(150)\ndoTicks(objs, 10, stopFunc=lambda : o1.getCounter() == 600 and o2.\n    getCounter() == 600)\nassert o1.getCounter() == 600\nassert o2.getCounter() == 600\no1._forceLogCompaction()\no2._forceLogCompaction()\ndoTicks(objs, 0.5)\no1.addValue(150)\no2.addValue(150)\ndoTicks(objs, 10, stopFunc=lambda : o1.getCounter() == 900 and o2.\n    getCounter() == 900)\nassert o1.getCounter() == 900\nassert o2.getCounter() == 900\no1._destroy()\no2._destroy()\na = [getNextAddr(), getNextAddr()]\no1 = TestObj(a[0], [a[1]], TEST_TYPE.JOURNAL_1, dumpFile=dumpFiles[0],\n    journalFile=journalFiles[0])\no2 = TestObj(a[1], [a[0]], TEST_TYPE.JOURNAL_1, dumpFile=dumpFiles[1],\n    journalFile=journalFiles[1])\nobjs = [o1, o2]\ndoTicks(objs, 10, stopFunc=lambda : o1._isReady() and o2._isReady() and o1.\n    getCounter() == 900 and o2.getCounter() == 900)\nassert o1._isReady()\nassert o2._isReady()\nassert o1._getLeader().address in a\nassert o1._getLeader() == o2._getLeader()\nassert o1.getCounter() == 900\nassert o2.getCounter() == 900\no1._destroy()\no2._destroy()\nremoveFiles(dumpFiles)\nremoveFiles(journalFiles)\n"
}