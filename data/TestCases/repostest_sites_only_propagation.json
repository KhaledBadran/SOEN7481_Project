{
    "functionName": "test_sites_only_propagation",
    "className": "TestContribution",
    "fileName": "/PmagPy_&_PmagPy/pmagpy_tests_&_test_contribution_builder.py",
    "projectName": "repos",
    "Label": false,
    "isTest": true,
    "Body": "\"\"\"\n        Make sure propagation works correclty with limited tables provided\n        \"\"\"\ndirectory = os.path.join(WD, 'data_files', '3_0', 'McMurdo')\ncon = cb.Contribution(directory, dmodel=DMODEL, read_tables=['sites'],\n    custom_filenames={'locations': '_locations.txt', 'samples': '_samples.txt'}\n    )\nself.assertEqual(['sites'], list(con.tables.keys()))\ncon.propagate_all_tables_info()\nself.assertEqual(sorted(['samples', 'sites', 'locations']), sorted(con.\n    tables.keys()))\nfor fname in ['_locations.txt', '_samples.txt']:\n    os.remove(os.path.join(directory, fname))\ncon = cb.Contribution(directory, dmodel=DMODEL, read_tables=['sites'],\n    custom_filenames={'locations': '_locations.txt', 'samples': '_samples.txt'}\n    )\nsamp_df = pd.DataFrame(index=['mc01b'], columns=['sample', 'site'], data=[[\n    'mc01b', 'fake site']])\nsamp_df = cb.MagicDataFrame(dtype='samples', df=samp_df)\ncon.tables['samples'] = samp_df\nself.assertEqual('fake site', con.tables['samples'].df.loc['mc01b', 'site'])\ncon.propagate_all_tables_info()\nself.assertEqual(sorted(['samples', 'sites', 'locations']), sorted(con.\n    tables.keys()))\nself.assertEqual('fake site', con.tables['samples'].df.loc['mc01b', 'site'])\nself.assertIn('mc01d', con.tables['samples'].df.index)\nfor fname in ['_locations.txt', '_samples.txt']:\n    os.remove(os.path.join(directory, fname))\ncon = cb.Contribution(self.directory, dmodel=DMODEL, read_tables=['sites'],\n    custom_filenames={'locations': '_locations.txt', 'samples': '_samples.txt'}\n    )\nself.assertEqual(['sites'], list(con.tables.keys()))\ncon.propagate_all_tables_info()\nself.assertEqual(sorted(['sites', 'locations']), sorted(con.tables.keys()))\nfor fname in ['_locations.txt']:\n    os.remove(os.path.join(self.directory, fname))\n"
}