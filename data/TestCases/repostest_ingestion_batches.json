{
    "functionName": "test_ingestion_batches",
    "className": null,
    "fileName": "/FreeDiscovery_&_FreeDiscovery/freediscovery_&_engine_&_tests_&_test_vectorizer.py",
    "projectName": "repos",
    "Label": false,
    "isTest": true,
    "Body": "data_dir = os.path.join(basename, '..', '..', 'data', 'ds_002', 'raw')\ncache_dir = check_cache()\nfe = FeatureVectorizer(cache_dir=cache_dir, mode='w')\nuuid = fe.setup()\nwith pytest.raises(ValueError):\n    fe.ingest(vectorize=True)\nfe.ingest(data_dir, file_pattern='.*\\\\d.txt', vectorize=False)\nfe.ingest(data_dir, file_pattern='.*\\\\d.txt', vectorize=False)\nfe.ingest(data_dir, file_pattern='.*\\\\d.txt', vectorize=False)\nfe.ingest(vectorize=True)\nassert fe.db_.data.shape[0] == len(fe.filenames_)\nassert len(fe.filenames_) == 6 * 3\nX = fe._load_features()\nassert X.shape[0] == 6 * 3\nwith pytest.raises(ValueError):\n    fe.ingest(vectorize=True)\n"
}