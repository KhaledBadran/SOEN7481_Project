{
    "functionName": "test_stored_procedures",
    "className": "test_MySQLdb",
    "fileName": "/anthill-utils_&_PyMySQL/pymysql_&_tests_&_thirdparty_&_test_MySQLdb_&_test_MySQLdb_capabilities.py",
    "projectName": "repos",
    "Label": false,
    "isTest": true,
    "Body": "db = self.connection\nc = self.cursor\ntry:\n    self.create_table(('pos INT', 'tree CHAR(20)'))\n    c.executemany('INSERT INTO %s (pos,tree) VALUES (%%s,%%s)' % self.table,\n        list(enumerate('ash birch cedar larch pine'.split())))\n    db.commit()\n    c.execute(\n        \"\"\"\n            CREATE PROCEDURE test_sp(IN t VARCHAR(255))\n            BEGIN\n                SELECT pos FROM %s WHERE tree = t;\n            END\n            \"\"\"\n         % self.table)\n    db.commit()\n    c.callproc('test_sp', ('larch',))\n    rows = c.fetchall()\n    self.assertEqual(len(rows), 1)\n    self.assertEqual(rows[0][0], 3)\n    c.nextset()\nfinally:\n    c.execute('DROP PROCEDURE IF EXISTS test_sp')\n    c.execute('drop table %s' % self.table)\n"
}