{
    "functionName": "test_CheckSubjectMatchesFilter",
    "className": null,
    "fileName": "/incf-nidash_&_PyNIDM/nidm_&_experiment_&_tools_&_tests_&_test_rest.py",
    "projectName": "repos",
    "Label": false,
    "isTest": true,
    "Body": "restParser = RestParser()\nif cmu_test_project_uuid:\n    project = cmu_test_project_uuid\nelse:\n    projects = restParser.run(BRAIN_VOL_FILES, '/projects')\n    project = projects[0]\nsubjects = restParser.run(BRAIN_VOL_FILES, '/projects/{}/subjects'.format(\n    project))\nsubject = subjects['uuid'][0]\nderivatives = Query.GetDerivativesDataForSubject(BRAIN_VOL_FILES, project,\n    subject)\nfor skey in derivatives:\n    for vkey in derivatives[skey]['values']:\n        dt = vkey\n        val = derivatives[skey]['values'][vkey]['value']\n        if dt and val:\n            break\nfilter = 'derivatives.{} eq {}'.format(dt, val)\nassert Query.CheckSubjectMatchesFilter(BRAIN_VOL_FILES, project, subject,\n    filter)\ninstruments = Query.GetParticipantInstrumentData(BRAIN_VOL_FILES, project,\n    subject)\nfor i, inst in instruments.items():\n    if 'AGE_AT_SCAN' in inst:\n        age = inst['AGE_AT_SCAN']\nolder = str(float(age) + 1)\nyounger = str(float(age) - 1)\nassert Query.CheckSubjectMatchesFilter(BRAIN_VOL_FILES, project, subject,\n    'instruments.AGE_AT_SCAN eq {}'.format(str(age)))\nassert Query.CheckSubjectMatchesFilter(BRAIN_VOL_FILES, project, subject,\n    'instruments.AGE_AT_SCAN lt {}'.format(younger)) == False\nassert Query.CheckSubjectMatchesFilter(BRAIN_VOL_FILES, project, subject,\n    'instruments.AGE_AT_SCAN gt {}'.format(younger)) == True\nassert Query.CheckSubjectMatchesFilter(BRAIN_VOL_FILES, project, subject,\n    'instruments.AGE_AT_SCAN lt {}'.format(older))\nassert Query.CheckSubjectMatchesFilter(BRAIN_VOL_FILES, project, subject,\n    'instruments.AGE_AT_SCAN gt {}'.format(older)) == False\neq__format = \"instruments.{} eq '{}'\".format('WISC_IV_VOCAB_SCALED', 'nan')\nassert Query.CheckSubjectMatchesFilter(BRAIN_VOL_FILES, project, subject,\n    eq__format)\neq__format = \"instruments.{} eq '{}'\".format('WISC_IV_VOCAB_SCALED',\n    'not a match')\nassert Query.CheckSubjectMatchesFilter(BRAIN_VOL_FILES, project, subject,\n    eq__format) == False\n"
}