{
    "functionName": "test_largeCommands",
    "className": null,
    "fileName": "/bakwc_&_PySyncObj/test_syncobj.py",
    "projectName": "repos",
    "Label": false,
    "isTest": true,
    "Body": "dumpFiles = [getNextDumpFile(), getNextDumpFile()]\nremoveFiles(dumpFiles)\nrandom.seed(42)\na = [getNextAddr(), getNextAddr()]\no1 = TestObj(a[0], [a[1]], TEST_TYPE.LARGE_COMMAND, dumpFile=dumpFiles[0],\n    leaderFallbackTimeout=60.0)\no2 = TestObj(a[1], [a[0]], TEST_TYPE.LARGE_COMMAND, dumpFile=dumpFiles[1],\n    leaderFallbackTimeout=60.0)\nobjs = [o1, o2]\ndoTicks(objs, 10, stopFunc=lambda : o1._isReady() and o2._isReady())\nassert o1._getLeader().address in a\nassert o1._getLeader() == o2._getLeader()\ntestRandStr = getRandStr()\nbigStr = ''\nfor i in xrange(0, 200):\n    bigStr += getRandStr()\no1.addKeyValue('big', bigStr)\no1.addKeyValue('test', testRandStr)\ndoTicks(objs, 60, stopFunc=lambda : o1.getValue('test') == testRandStr and \n    o2.getValue('test') == testRandStr and o1.getValue('big') == bigStr and\n    o2.getValue('big') == bigStr)\nassert o1.getValue('test') == testRandStr\nassert o2.getValue('big') == bigStr\no1._forceLogCompaction()\no2._forceLogCompaction()\ndoTicks(objs, 8.0)\no1._destroy()\no2._destroy()\na = [getNextAddr(), getNextAddr()]\no1 = TestObj(a[0], [a[1]], TEST_TYPE.LARGE_COMMAND, dumpFile=dumpFiles[0],\n    leaderFallbackTimeout=60.0)\no2 = TestObj(a[1], [a[0]], TEST_TYPE.LARGE_COMMAND, dumpFile=dumpFiles[1],\n    leaderFallbackTimeout=60.0)\nobjs = [o1, o2]\ndoTicks(objs, 60, stopFunc=lambda : o1.getValue('test') == testRandStr and \n    o2.getValue('test') == testRandStr and o1.getValue('big') == bigStr and\n    o2.getValue('big') == bigStr and o1._isReady() and o2._isReady())\nassert o1._getLeader().address in a\nassert o1._getLeader() == o2._getLeader()\nassert o1.getValue('test') == testRandStr\nassert o2.getValue('big') == bigStr\nassert o1.getValue('test') == testRandStr\nassert o2.getValue('big') == bigStr\no1._destroy()\no2._destroy()\nremoveFiles(dumpFiles)\n"
}