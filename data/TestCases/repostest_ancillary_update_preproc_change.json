{
    "functionName": "test_ancillary_update_preproc_change",
    "className": null,
    "fileName": "/AFM-analysis_&_PyJibe/tests_&_test_fd_fit.py",
    "projectName": "repos",
    "Label": false,
    "isTest": true,
    "Body": "with MockModel(compute_ancillaries=lambda x: {'E': np.nan if len(x.\n    preprocessing) == 1 else 2345}, parameter_anc_keys=['E'],\n    parameter_anc_names=['ancillary E guess'], parameter_anc_units=['Pa'],\n    model_key='test1'):\n    main_window = pyjibe.head.PyJibe()\n    main_window.load_data(files=[jpkfile, jpkfile])\n    war = main_window.subwindows[0].widget()\n    war.tab_preprocess.list_preproc_applied.clear()\n    war.cb_autosave.setChecked(0)\n    item = QtWidgets.QListWidgetItem()\n    item.setText('compute_tip_position')\n    war.tab_preprocess.list_preproc_applied.addItem(item)\n    war.tab_fit.cb_weight_cp.setCheckState(0)\n    idx = war.tab_fit.cb_model.findData('test1')\n    war.tab_fit.cb_model.setCurrentIndex(idx)\n    itab = war.tab_fit.table_parameters_initial\n    atab = war.tab_fit.table_parameters_anc\n    war.on_tab_changed(1)\n    assert len(war.data_set[0].preprocessing) == 1\n    assert war.tab_preprocess.list_preproc_applied.count() == 1\n    assert atab.item(0, 1).text() == 'nan'\n    assert itab.item(0, 1).text() == '3000'\n    war.tabs.setCurrentIndex(0)\n    item = QtWidgets.QListWidgetItem()\n    item.setText('correct_tip_offset')\n    war.tab_preprocess.list_preproc_applied.addItem(item)\n    war.tabs.setCurrentIndex(1)\n    assert len(war.data_set[0].preprocessing) == 2\n    assert war.tab_preprocess.list_preproc_applied.count() == 2\n    assert atab.item(0, 1).text() == '2345'\n    assert itab.item(0, 1).text() == '2345'\n"
}