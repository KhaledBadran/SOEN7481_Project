{
    "functionName": "test_sub_notify_unsub",
    "className": null,
    "fileName": "/marten-de-vries_&_Flask-WebSub/tests_&_test_integration.py",
    "projectName": "repos",
    "Label": false,
    "isTest": true,
    "Body": "on_success = Mock()\nsubscriber.add_success_handler(on_success)\ntopic = 'http://example.com'\nid = subscriber.subscribe(topic_url=topic, hub_url='https://localhost:5001/hub'\n    )\nwhile not on_success.called:\n    pass\non_success.assert_called_with(topic, id, 'subscribe')\non_topic_change = Mock()\nsubscriber.add_listener(on_topic_change)\ncontent = {'content': base64.b64encode(b'Hello World!').decode('ascii'),\n    'headers': {'Link': ', '.join(['<http://example.com>; rel=\"self\"',\n    '<https://localhost:5001/hub>; rel=\"hub\"'])}}\nhttps_hub.send_change_notification.delay(topic, content).get()\nwhile not on_topic_change.called:\n    pass\non_topic_change.assert_called_with(topic, id, b'Hello World!')\non_success = Mock()\nsubscriber.add_success_handler(on_success)\nsubscriber.unsubscribe(id)\nwhile not on_success.called:\n    pass\non_success.assert_called_with(topic, id, 'unsubscribe')\n"
}