{
    "functionName": "test_lsi_append_documents",
    "className": null,
    "fileName": "/FreeDiscovery_&_FreeDiscovery/freediscovery_&_engine_&_tests_&_test_lsi.py",
    "projectName": "repos",
    "Label": false,
    "isTest": true,
    "Body": "cache_dir = check_cache()\nfe = FeatureVectorizer(cache_dir=cache_dir, mode='w')\nuuid = fe.setup()\nfe.ingest(data_dir)\nlsi = _LSIWrapper(cache_dir=cache_dir, parent_id=uuid, mode='w')\nlsi_res, exp_var = lsi.fit_transform(n_components=2, alpha=1.0)\nX_lsi = lsi._load_features()\nn_samples = fe.n_samples_\ndocs = DocumentIndex.from_folder(data_dir).data\ndocs['document_id'] += 10\ndataset_definition = docs[['file_path', 'document_id']].to_dict(orient=\n    'records')\nfor row in dataset_definition:\n    row['file_path'] = os.path.join(data_dir, row['file_path'])\nfe.append(dataset_definition)\nX_lsi_new = lsi._load_features()\nassert X_lsi_new.shape[0] == X_lsi.shape[0] * 2\nassert_equal(X_lsi_new[:n_samples], X_lsi_new[:n_samples])\n"
}