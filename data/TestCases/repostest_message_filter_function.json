{
    "functionName": "test_message_filter_function",
    "className": null,
    "fileName": "/GMLC-TDC_&_HELICS/tests_&_python_&_test_message_filter.py",
    "projectName": "repos",
    "Label": false,
    "isTest": true,
    "Body": "fFed, ffedinfo = AddFederate(broker, 'zmq', 1, 1, 'filter')\nmFed, mfedinfo = AddFederate(broker, 'zmq', 1, 1, 'message')\np1 = h.helicsFederateRegisterGlobalEndpoint(mFed, 'port1', '')\np2 = h.helicsFederateRegisterGlobalEndpoint(mFed, 'port2', 'random')\nf1 = h.helicsFederateRegisterGlobalFilter(fFed, h.helics_filter_type_custom,\n    'filter1')\nh.helicsFilterAddSourceTarget(f1, 'port1')\nf2 = h.helicsFederateRegisterGlobalFilter(fFed, h.helics_filter_type_delay,\n    'filter2')\nh.helicsFilterAddSourceTarget(f2, 'port1')\nh.helicsFederateRegisterEndpoint(fFed, 'fout', '')\nf3 = h.helicsFederateRegisterFilter(fFed, h.helics_filter_type_random_delay,\n    'filter3')\nh.helicsFilterAddSourceTarget(f3, 'filter/fout')\nh.helicsFilterSet(f2, 'delay', 2.5)\nh.helicsFederateEnterExecutingModeAsync(fFed)\nh.helicsFederateEnterExecutingMode(mFed)\nh.helicsFederateEnterExecutingModeComplete(fFed)\nstate = h.helicsFederateGetState(fFed)\nassert state == 2\ndata = 'hello world'\nfilt_key = h.helicsFilterGetName(f1)\nassert filt_key == 'filter1'\nfilt_key = h.helicsFilterGetName(f2)\nassert filt_key == 'filter2'\nh.helicsEndpointSendMessageRaw(p1, 'port2', data)\nh.helicsFederateRequestTimeAsync(mFed, 1.0)\ngrantedtime = h.helicsFederateRequestTime(fFed, 1.0)\nassert grantedtime == 1.0\ngrantedtime = h.helicsFederateRequestTimeComplete(mFed)\nassert grantedtime == 1.0\nres = h.helicsFederateHasMessage(mFed)\nassert res == 0\nres = h.helicsEndpointHasMessage(p2)\nassert res == 0\nh.helicsFederateFinalize(mFed)\nh.helicsFederateFinalize(fFed)\nFreeFederate(fFed, ffedinfo)\nFreeFederate(mFed, mfedinfo)\ntime.sleep(1.0)\n"
}