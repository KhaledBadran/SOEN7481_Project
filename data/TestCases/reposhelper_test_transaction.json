{
    "functionName": "helper_test_transaction",
    "className": "UITestCase",
    "fileName": "/AndreMiras_&_EtherollApp/src_&_etherollapp_&_tests_&_ui_&_test_etheroll_ui.py",
    "projectName": "repos",
    "Label": false,
    "isTest": false,
    "Body": "\"\"\"Trying to send ETH.\"\"\"\ncontroller = app.root\nswitch_account_screen = controller.switch_account_screen\nsend_subscreen = switch_account_screen.ids.send_id\nsend_subscreen.parent.dispatch('on_tab_press')\nadvance_frames_for_screen()\ncontroller.current_account = controller.account_utils.get_account_list()[0]\nsend_to_address = '0x46044beAa1E985C67767E04dE58181de5DAAA00F'\nsend_subscreen.ids.send_to_id.text = send_to_address\namount_eth = 1.2\nsend_subscreen.ids.amount_eth_id.text = f'{amount_eth}'\nsend_button = send_subscreen.ids.send_button_id\nself.assertEqual(send_button.text, 'Send')\nsend_button.dispatch('on_release')\ndialogs = Dialog.dialogs\nself.assertEqual(len(dialogs), 1)\ndialog = dialogs[0]\nself.assertEqual(dialog.title, 'Enter your password')\npassword = 'password'\ndialog.content.password = password\nunlock_button = dialog._action_buttons[0]\nwith patch('pyetheroll.etheroll.Etheroll.transaction', autospec=True\n    ) as m_transaction:\n    m_transaction.return_value = HexBytes(\n        '0x7be6e37621eb12db7dc535954345f69d8cc5644b2de0ec32a344ca33c3054237')\n    unlock_button.dispatch('on_release')\npyetheroll = controller.pyetheroll\nto = send_to_address\nvalue = int(amount_eth * 1e+18)\nwallet_path = controller.current_account.path\ngas_price_wei = mock.ANY\nself.assertEqual(m_transaction.mock_calls, [mock.call(pyetheroll, to, value,\n    wallet_path, password, gas_price_wei)])\nadvance_frames_for_screen()\nthreads = threading.enumerate()\nself.assertEqual(len(threads), 2, threads[-1]._target)\nmain_thread = threads[0]\nself.assertEqual(type(main_thread), threading._MainThread)\ndialogs = Dialog.dialogs\nself.assertEqual(len(dialogs), 1)\ndialog = dialogs[0]\nself.assertEqual(dialog.title, 'Transaction successful')\ndialog.dismiss()\nself.assertEqual(len(dialogs), 0)\n"
}